# DisasterRelief + Self Protocol èªè­‰ç³»çµ±èªªæ˜

## ğŸ¯ ç³»çµ±æ¦‚è¿°

ChainBank çš„ **DisasterReliefï¼ˆç½é›£æ•‘åŠ©é‡‘ï¼‰** ç³»çµ±çµåˆäº† **Self Protocol** èº«ä»½èªè­‰æŠ€è¡“ï¼Œå¯¦ç¾ã€Œ**èªè­‰å³é ˜å–**ã€çš„æµç¨‹ï¼š

1. âœ… ç”¨æˆ¶é€šé Self Protocol å®Œæˆèº«ä»½é©—è­‰
2. âœ… é©—è­‰æˆåŠŸå¾Œè‡ªå‹•è¼‰å…¥å¯é ˜å–çš„æ•‘åŠ©è¨ˆåŠƒ
3. âœ… ä¸€éµé ˜å–è£œåŠ©é‡‘ï¼Œç„¡éœ€æ‰‹å‹•ç°½å
4. âœ… ç³»çµ±è‡ªå‹•é˜²æ­¢é‡è¤‡é ˜å–

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç½é›£æ•‘åŠ©é‡‘é ˜å–æµç¨‹                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 1: Self Protocol èº«ä»½èªè­‰                           â”‚
â”‚  â€¢ ç”¨æˆ¶é»æ“Šã€Œé–‹å§‹èº«ä»½é©—è­‰ã€                               â”‚
â”‚  â€¢ æ‰“é–‹ Self Protocol é©—è­‰è¦–çª—                           â”‚
â”‚  â€¢ é€šéç”Ÿç‰©è¾¨è­˜/æ–‡ä»¶é©—è­‰                                  â”‚
â”‚  â€¢ è¿”å›é©—è­‰çµæœï¼ˆnullifier, userIdentifier, proofï¼‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 2: è¼‰å…¥å¯ç”¨çš„æ•‘åŠ©è¨ˆåŠƒ                                â”‚
â”‚  â€¢ æŸ¥è©¢æ‰€æœ‰å•Ÿç”¨ä¸­çš„æ•‘åŠ©è¨ˆåŠƒ                               â”‚
â”‚  â€¢ æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å·²é ˜å–é                                   â”‚
â”‚  â€¢ é¡¯ç¤ºå¯é ˜å–çš„è¨ˆåŠƒåˆ—è¡¨                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥é©Ÿ 3: è‡ªå‹•ç°½åä¸¦é ˜å–                                    â”‚
â”‚  â€¢ ç”¨æˆ¶é¸æ“‡è¦é ˜å–çš„è¨ˆåŠƒ                                   â”‚
â”‚  â€¢ ç³»çµ±ä½¿ç”¨ç§é‘°è‡ªå‹•ç°½åï¼ˆç„¡å½ˆçª—ï¼‰(å› ç³»çµ±åªå¯«å‰ç«¯æ•…å…ˆå­˜åœ¨local) â”‚
â”‚  â€¢ èª¿ç”¨ DisasterRelief.claimRelief()                     â”‚
â”‚  â€¢ NTD_TOKEN è‡ªå‹•è½‰å…¥ç”¨æˆ¶éŒ¢åŒ…                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---
## ğŸ’¡ å¯¦éš›æ‡‰ç”¨å ´æ™¯

### å ´æ™¯ 1ï¼šé¢±é¢¨ç½å¾Œæ•‘åŠ©

**è¨ˆåŠƒè¨­å®šï¼š**
```javascript
await disasterReliefContract.createProgram(
  "2024å¹´é¢±é¢¨æ•‘åŠ©é‡‘",
  ethers.parseUnits("10000000", 18),  // 1000 è¬ NTD
  ethers.parseUnits("5000", 18)       // æ¯äºº 5000 NTD
);
// å¯ç™¼æ”¾ 2000 äºº
```

**ç”¨æˆ¶é ˜å–ï¼š**
1. ç½æ°‘æ‰“é–‹ ChainBank ç¶²ç«™
2. å®Œæˆ Self Protocol èº«ä»½é©—è­‰ï¼ˆ30 ç§’ï¼‰
3. çœ‹åˆ°ã€Œ2025å¹´èŠ±é€£é¢±é¢¨æ•‘åŠ©é‡‘ - å¯é ˜å– 5000 NTDã€
4. é»æ“Šé ˜å–
5. 5000 NTD ç«‹å³åˆ°å¸³

## ğŸ“ ç¸½çµ

ChainBank çš„ **DisasterRelief + Self Protocol** ç³»çµ±å¯¦ç¾äº†ï¼š

1. âœ… **å¿«é€Ÿé©—è­‰**ï¼š30 ç§’å®Œæˆèº«ä»½èªè­‰
2. âœ… **è‡ªå‹•ç™¼æ”¾**ï¼šç„¡éœ€æ‰‹å‹•ç°½åï¼Œä¸€éµé ˜å–
3. âœ… **é˜²é‡è¤‡é ˜å–**ï¼šæ™ºèƒ½åˆç´„è‡ªå‹•é˜²è­·
4. âœ… **éš±ç§ä¿è­·**ï¼šåœ°å€å®Œå…¨éš±è—ï¼Œèº«ä»½éš”é›¢
5. âœ… **é€æ˜å¯è¿½è¹¤**ï¼šæ‰€æœ‰ç™¼æ”¾è¨˜éŒ„ä¸Šéˆ
6. âœ… **é›¶ Gas è² æ“”**ï¼šç”¨æˆ¶ç„¡éœ€æ”¯ä»˜äº¤æ˜“è²»ç”¨

**è®“ç½é›£æ•‘åŠ©é‡‘ç™¼æ”¾è®Šå¾—ï¼š**
- ğŸš€ æ›´å¿«é€Ÿï¼ˆ1 åˆ†é˜ vs 1-3 å¤©ï¼‰
- ğŸ”’ æ›´å®‰å…¨ï¼ˆé˜²é‡è¤‡é ˜å– + é›¶çŸ¥è­˜è­‰æ˜ï¼‰
- ğŸ•¶ï¸ æ›´ç§å¯†ï¼ˆåœ°å€éš±è— + èº«ä»½ä¿è­·ï¼‰
- ğŸ’° æ›´çœéŒ¢ï¼ˆè‡ªå‹•åŒ–æµç¨‹ + é™ä½äººåŠ›æˆæœ¬ï¼‰

**é€™å°±æ˜¯ Web3 + DID æŠ€è¡“ç‚ºç¤¾æœƒç¦åˆ©å¸¶ä¾†çš„é©å‘½æ€§æ”¹è®Šï¼**


## ğŸ”’ å®‰å…¨æ©Ÿåˆ¶

### 1. é˜²é‡è¤‡é ˜å–

```solidity
// åˆç´„å±¤ç´šï¼šä½¿ç”¨ mapping è¨˜éŒ„
mapping(address => bool) hasClaimed;

// æª¢æŸ¥æ©Ÿåˆ¶
if (program.hasClaimed[msg.sender]) revert AlreadyClaimed();

// æ¨™è¨˜å·²é ˜å–
program.hasClaimed[msg.sender] = true;
```

**å„ªå‹¢ï¼š**
- âœ… éˆä¸Šè¨˜éŒ„ï¼Œç„¡æ³•ç«„æ”¹
- âœ… æ¯å€‹åœ°å€åªèƒ½é ˜å–ä¸€æ¬¡
- âœ… Gas è²»ç”¨ä½ï¼ˆåªå¯«å…¥ boolï¼‰

---

### 2. é˜²é‡å…¥æ”»æ“Šï¼ˆReentrancyGuardï¼‰

```solidity
function claimRelief(uint256 programId) external nonReentrant {
    // 1. å…ˆæ›´æ–°ç‹€æ…‹
    program.hasClaimed[msg.sender] = true;
    program.totalDistributed += program.amountPerPerson;
    
    // 2. å†é€²è¡Œè½‰å¸³
    NTD_TOKEN.transfer(msg.sender, program.amountPerPerson);
}
```

**é˜²è­·åŸç†ï¼š**
- ğŸ›¡ï¸ ä½¿ç”¨ OpenZeppelin çš„ ReentrancyGuard
- ğŸ›¡ï¸ éµå¾ª Checks-Effects-Interactions æ¨¡å¼
- ğŸ›¡ï¸ é˜²æ­¢æƒ¡æ„åˆç´„é‡å…¥æ”»æ“Š

---

### 3. Self Protocol Nullifierï¼ˆé˜²é‡è¤‡é©—è­‰ï¼‰

```javascript
verificationResult = {
  nullifier: "0x0101...",  // å”¯ä¸€æ€§è­‰æ˜
  // ...
}
```

---

## ğŸ¨ ç”¨æˆ¶é«”é©—æµç¨‹

### å‚³çµ±æ–¹å¼ vs ChainBank

#### âŒ å‚³çµ± DApp æµç¨‹

```
1. é€£æ¥ MetaMask éŒ¢åŒ…
2. åˆ‡æ›åˆ°æ­£ç¢ºç¶²è·¯
3. æäº¤èº«ä»½è­‰æ˜æ–‡ä»¶
4. ç­‰å¾…äººå·¥å¯©æ ¸ï¼ˆ1-3 å¤©ï¼‰
5. å¯©æ ¸é€šéå¾Œæ‰‹å‹•ç”³è«‹
6. MetaMask å½ˆå‡ºç°½åè¦–çª—
7. æª¢æŸ¥ Gas Fee ä¸¦ç¢ºèª
8. ç­‰å¾…äº¤æ˜“ç¢ºèª
9. é ˜å–æˆåŠŸ
```
**ç¸½æ™‚é–“ï¼š** 1-3 å¤© + 10 åˆ†é˜æ“ä½œ
**æ­¥é©Ÿï¼š** 9 æ­¥

---

#### âœ… ChainBank æµç¨‹

```
1. é»æ“Šã€Œé–‹å§‹èº«ä»½é©—è­‰ã€
2. åœ¨ Self Protocol å®Œæˆç”Ÿç‰©è¾¨è­˜ï¼ˆ30 ç§’ï¼‰
3. è‡ªå‹•è¼‰å…¥å¯é ˜å–çš„æ•‘åŠ©è¨ˆåŠƒ
4. é»æ“Šã€Œé ˜å–ã€
5. âœ¨ è‡ªå‹•å®Œæˆï¼ˆç„¡å½ˆçª—ï¼‰
6. é ˜å–æˆåŠŸï¼
```
**ç¸½æ™‚é–“ï¼š** 1 åˆ†é˜
**æ­¥é©Ÿï¼š** 4 æ­¥ï¼ˆç”¨æˆ¶æ“ä½œï¼‰

---

## ğŸ“Š ç³»çµ±å„ªå‹¢ç¸½çµ

| ç‰¹æ€§ | å‚³çµ±æ–¹å¼ | ChainBank + Self |
|-----|---------|-----------------|
| **èº«ä»½é©—è­‰** | ä¸Šå‚³æ–‡ä»¶ + äººå·¥å¯©æ ¸ | Self Protocol è‡ªå‹•é©—è­‰ |
| **é©—è­‰æ™‚é–“** | 1-3 å¤© | 30 ç§’ |
| **ç°½åæ–¹å¼** | MetaMask å½ˆçª— | è‡ªå‹•ç°½åï¼ˆç„¡å½ˆçª—ï¼‰ |
| **åœ°å€é¡¯ç¤º** | å®Œå…¨å…¬é–‹ | å®Œå…¨éš±è— |
| **æ“ä½œæ­¥é©Ÿ** | 9 æ­¥ | 4 æ­¥ |
| **Gas Fee** | ç”¨æˆ¶è‡ªä»˜ | ç³»çµ±ä»£ä»˜ |
| **é˜²é‡è¤‡é ˜å–** | éœ€é¡å¤–é©—è­‰ | éˆä¸Šè‡ªå‹•é˜²è­· |
| **éš±ç§æ€§** | ä½ï¼ˆå¯è¿½è¹¤ï¼‰ | é«˜ï¼ˆèº«ä»½éš”é›¢ï¼‰ |
| **ç”¨æˆ¶é«”é©—** | è¤‡é›œ | ç°¡å–®ç›´è§€ |

---

## ğŸ› ï¸ æŠ€è¡“æ•´åˆåœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ChainBank ç½é›£æ•‘åŠ©ç³»çµ±                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                 â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Self Protocolâ”‚  â”‚  DisasterRe- â”‚  â”‚  NTD_TOKEN   â”‚
â”‚   èº«ä»½é©—è­‰    â”‚  â”‚  lief åˆç´„   â”‚  â”‚   ä»£å¹£åˆç´„    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                 â”‚
        â”‚                 â”‚                 â”‚
        â†“                 â†“                 â†“
   ç”Ÿç‰©è¾¨è­˜é©—è­‰      é˜²é‡è¤‡é ˜å–æ©Ÿåˆ¶      è‡ªå‹•è½‰å¸³ç™¼æ”¾
   é›¶çŸ¥è­˜è­‰æ˜        é ç®—è‡ªå‹•ç®¡ç†        é¤˜é¡è¿½è¹¤
   Nullifier        ReentrancyGuard    ERC20 æ¨™æº–
```

---

